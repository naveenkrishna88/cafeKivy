ScreenManager:
    name: 'screens'
    LogInScreen:
        name: "logIn"
    ActivityScreen:
        name: "activity"
    Dish_AddScreen:
        name: "add_dish"
    Dish_ModifyScreen:
        name: "modify_dish"
    Dish_ViewScreen:
        name: "view_dish"


<LogInScreen>:
    name: "logIn"
    on_leave: self.getUsername()
    MDScreen:
        md_bg_color: [1,1,51/255.0,0.6]
        #md_bg_color: [0,0,1,0.7]
        MDIcon:
            icon: "blah-blah"
            font_size: 85
            pos_hint: {'center_x': 0.5, 'center_y':0.9}
            halign: 'center'
        MDLabel:
            text: 'Welcome!'
            font_style: 'H2'
            font_size: 50
            halign: 'center'
            size_hint_y: None
            height: self.texture_size[1]
            padding_y: 20
            pos_hint: {'center_y' : 0.75}

        AnimCard:
            id: animCard_logIn
            orientation: 'vertical'
            padding:'8sp'
            pos_hint:{'center_x': 0.5, 'center_y': 0.4}
            size_hint:(0.9, 0.45)
            GridLayout:
                rows: 3
                padding: 25
                spacing: 20
                MDTextField:
                    id: username
                    hint_text: "Username"
                    helper_text: "case sensitive"
                    helper_text_mode: 'on_focus'
                    required: True
                    icon_right: 'account'
                    multiline: False
                    size_hint_x: 0.8
                    pos_hint: {'center_x': 0.5, 'center_y':0.9}
                MDTextField:
                    id: password
                    hint_text: "Enter the password"
                    helper_text: "password is case sensitive"
                    helper_text_mode: 'on_focus'
                    icon_right: 'eye-off'
                    password: True
                    required: True
                    size_hint_x: 0.8
                    pos_hint: {'center_x': 0.5, 'center_y':0.5}

                MDFillRoundFlatIconButton:
                    id: submit
                    text: 'Log In'
                    icon: 'check'
                    pos_hint: {'center_x': 0.5, 'center_y': 0.1}
                    size_hint: (0.8, 0.2)
                    #height: 45
                    md_bg_color: (128/255.0,128/255.0,1/255.0,1)
                    text_color: (0,0,0,1)
                    on_release: app.root.current = "activity" if root.logIn_verify() else "logIn"


<FunctionsBar>:
    id: functions_bar
    md_bg_color: [128/255.0,128/255.0,128/255.0,0.3]
    cols: 3
    bottom: 1
    MDIconButton:
        icon: 'power'
        user_font_size: 40
        on_release:
            app.root.current = 'logIn'
        pos_hint: {'x': 0.8, 'y':0.9}
    MDIconButton:
        icon: 'plus'
        on_release:
            app.root.current = 'activity'
            app.root.current = 'add_dish'
        pos_hint: {'x': 0.15}
    MDIconButton:
        icon: 'glasses'
        on_release:
            app.root.current = 'activity'
            app.root.current = 'view_dish'
        pos_hint: {'x': 0.45}
    MDIconButton:
        icon: 'lead-pencil'
        on_release:
            app.root.current = 'activity'
            app.root.current = "modify_dish"
        pos_hint: {'x': 0.75}

<ActivityScreen>:
    MDScreen:
        MDLabel:
            text: 'Welcome!'
            font_style: 'H2'
            font_size: 50
            pos_hint: {'center_y' : 0.5, 'center_x':0.55}
        FunctionsBar:

<Dish_AddScreen>:
    MDScreen:
        MDLabel:
            text: 'Add!'
            font_style: 'H2'
            font_size: 50
            pos_hint: {'center_y' : 0.8, 'center_x':0.55}
        AnimCard:
            id: animCard_add
            orientation: 'vertical'
            padding:'8sp'
            pos_hint:{'center_x': 0.5, 'center_y': 0.4}
            size_hint:(0.9, 0.45)
            GridLayout:
                rows: 3
                padding: 25
                spacing: 20
                MDTextField:
                    id: dishName_entry
                    hint_text: 'Dish\'s name'
                    multiline: False
                    size_hint: (0.8,None)
                    height: '30sp'
                    normal_color: (0,0,0,1)
                    foreground_color: (0,0,0,1)
                    pos_hint: {'center_x': 0.5, 'center_y':0.9}
                MDTextField:
                    id: price_entry
                    hint_text: 'Dish\'s price'
                    multiline: False
                    size_hint: (0.8,None)
                    height: '30sp'
                    foreground_color: (0,0,0,1)
                    pos_hint: {'center_x': 0.5, 'center_y':0.7}
                MDFillRoundFlatButton:
                    id: addDish_btn
                    text:'Add Dish'
                    size_hint: 0.8, 0.2
                    on_release: root.dishAdd_cafe()


        FunctionsBar:


<Dish_ModifyScreen>:
    MDScreen:
        MDLabel:
            text: 'Modify!'
            font_style: 'H2'
            font_size: 50
            pos_hint: {'center_y' : 0.8, 'center_x':0.55}
        AnimCard:
            id: animCard_modify
            orientation: 'vertical'
            padding:'10sp'
            pos_hint:{'center_x': 0.5, 'center_y': 0.45}
            size_hint:(0.9, 0.5)
            RelativeLayout:
                Spinner:
                    id: dishNames_spinner
                    text: 'Select dish to modify'
                    #values: ['a','b']
                    size_hint: (0.95, 0.185)
                    pos_hint: {'x': 0.05, 'center_y': 0.85}
                    on_text: root.details_filler(dishNames_spinner.text)

                MDTextField:
                    id: dishPrice_modify
                    hint_text: "New Price of the dish"
                    mode: 'rectangle'
                    hint_text_mode: 'persistent'
                    size_hint: (0.85, 0.2)
                    pos_hint: {'x':0.1, 'center_y': 0.6}

                MDLabel:
                    text: "Available?"
                    font_style: 'H4'
                    font_size: 20
                    pos_hint: {'x': 0.07, 'center_y':0.35}

                MDSwitch:
                    id: availability_switch
                    pos_hint: {'x': 0.8, 'center_y':0.35}
                    width: 50

                MDIconButton:
                    icon: 'check'
                    user_font_size: 40
                    md_bg_color: (0.5,0.5,0.5,1)
                    pos_hint: {'center_x': 0.9, 'center_y':0.1}
                    on_release: root.dishModify_cafe()

        FunctionsBar:

<Dish_ViewScreen>:
    MDScreen:
        MDLabel:
            text: 'View!'
            font_style: 'H2'
            font_size: 50
            pos_hint: {'center_y' : 0.8, 'center_x':0.55}

        AnimCard:
            id: animCard_view
            orientation: 'vertical'
            padding:'10sp'
            pos_hint:{'center_x': 0.5, 'center_y': 0.45}
            size_hint:(0.9, 0.5)
            ScrollView:
                MDList:
                    cols: 2
                    spacing: 10
                    padding: 10
                    id: container


        FunctionsBar:
